#include <stdio.h>
#include <stdlib.h>
#include <stdint.h>

#define FLAG_PATH "flag"
#define FLAG_SIZE 200

#define ODGOVOR_MAX 56
#define TOCAN_KOD 0x476b2336
#define KRIVI_KOD 0x4b895433

struct odgovor {
	char odgovor[ODGOVOR_MAX];
	uint32_t tajni_kod;
};

void ispisi_tajne_podatke()
{
	FILE *file;
	char flag[FLAG_SIZE];

	file = fopen(FLAG_PATH, "r");

	fgets(flag, sizeof flag, file);

	fclose(file);

	printf("%s\r\n", flag);
}

int main()
{
	struct odgovor tocan_odgovor, krivi_odgovor;

	tocan_odgovor.tajni_kod = TOCAN_KOD;
	krivi_odgovor.tajni_kod = KRIVI_KOD;
	
	puts("+--------------------------------------------------------------+");
	puts("Mislis da mozes saznati gdje se nalazimo? Testiraj svoje znanje.\r");
	puts("+--------------------------------------------------------------+");
	fflush(stdout);

	gets(krivi_odgovor.odgovor);

	if (krivi_odgovor.tajni_kod == TOCAN_KOD) {
		puts("Tocan odgovor!\r");
		ispisi_tajne_podatke();
	} else {
		puts("Krivi odgovor!\r");
	}

	puts("...\r");
	fflush(stdout);
	getchar();

	return 0;
}
